{"version":3,"file":"menu.component.js","sourceRoot":"","sources":["../../../../../.ng_build/theme/components/menu/menu.component.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { Component, Input, Output, EventEmitter, OnInit, OnDestroy, HostBinding } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { takeWhile } from 'rxjs/operators/takeWhile';\nimport { filter } from 'rxjs/operators/filter';\n\nimport { NbMenuInternalService, NbMenuItem } from './menu.service';\nimport { convertToBoolProperty } from '../helpers';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: '[nbMenuItem]',\n  templateUrl: './menu-item.component.html',\n})\nexport class NbMenuItemComponent {\n  @Input() menuItem = <NbMenuItem>null;\n\n  @Output() hoverItem = new EventEmitter<any>();\n  @Output() toggleSubMenu = new EventEmitter<any>();\n  @Output() selectItem = new EventEmitter<any>();\n  @Output() itemClick = new EventEmitter<any>();\n\n  constructor(private router: Router) { }\n\n  onToggleSubMenu(item: NbMenuItem) {\n    this.toggleSubMenu.emit(item);\n  }\n\n  onHoverItem(item: NbMenuItem) {\n    this.hoverItem.emit(item);\n  }\n\n  onSelectItem(item: NbMenuItem) {\n    this.selectItem.emit(item);\n  }\n\n  onItemClick(item: NbMenuItem) {\n    this.itemClick.emit(item);\n  }\n}\n\n/**\n * Vertical menu component.\n *\n * Accepts a list of menu items and renders them accordingly. Supports multi-level menus.\n *\n * @styles\n *\n * menu-font-family:\n * menu-font-size:\n * menu-font-weight:\n * menu-fg:\n * menu-bg:\n * menu-active-fg:\n * menu-active-bg:\n * menu-active-font-weight:\n * menu-submenu-bg:\n * menu-submenu-fg:\n * menu-submenu-active-fg:\n * menu-submenu-active-bg:\n * menu-submenu-active-border-color:\n * menu-submenu-active-shadow:\n * menu-submenu-hover-fg:\n * menu-submenu-hover-bg:\n * menu-submenu-item-border-width:\n * menu-submenu-item-border-radius:\n * menu-submenu-item-padding:\n * menu-submenu-item-container-padding:\n * menu-submenu-padding:\n * menu-group-font-weight:\n * menu-group-font-size:\n * menu-group-fg:\n * menu-group-padding\n * menu-item-padding:\n * menu-item-separator:\n * menu-icon-font-size:\n * menu-icon-margin:\n * menu-icon-color:\n * menu-icon-active-color:\n */\n@Component({\n  selector: 'nb-menu',\n  styleUrls: ['./menu.component.css'],\n  template: `\n    <ul class=\"menu-items\">\n      <li nbMenuItem *ngFor=\"let item of items\"\n                      [menuItem]=\"item\"\n                      [class.menu-group]=\"item.group\"\n                      (hoverItem)=\"onHoverItem($event)\"\n                      (toggleSubMenu)=\"onToggleSubMenu($event)\"\n                      (selectItem)=\"onSelectItem($event)\"\n                      (itemClick)=\"onItemClick($event)\"\n                      class=\"menu-item\"></li>\n    </ul>\n  `,\n})\nexport class NbMenuComponent implements OnInit, OnDestroy {\n  @HostBinding('class.inverse') inverseValue: boolean;\n\n  /**\n   * Tags a menu with some ID, can be later used in the menu service\n   * to determine which menu triggered the action, if multiple menus exist on the page.\n   *\n   * @type {string}\n   */\n  @Input() tag: string;\n\n  /**\n   * List of menu items.\n   * @type List<NbMenuItem> | List<any> | any\n   */\n  @Input() items: NbMenuItem[];\n\n  /**\n   * Makes colors inverse based on current theme\n   * @type boolean\n   */\n  @Input()\n  set inverse(val: boolean) {\n    this.inverseValue = convertToBoolProperty(val);\n  }\n\n  /**\n   * Collapse all opened submenus on the toggle event\n   * Default value is \"false\"\n   * @type boolean\n   */\n  @Input()\n  set autoCollapse(val: boolean) {\n    this.autoCollapseValue = convertToBoolProperty(val);\n  }\n\n  private alive: boolean = true;\n  private autoCollapseValue: boolean = false;\n\n  constructor(private menuInternalService: NbMenuInternalService, private router: Router) { }\n\n  ngOnInit() {\n    this.menuInternalService\n      .onAddItem()\n      .pipe(\n        takeWhile(() => this.alive),\n      )\n      .subscribe((data: { tag: string; items: NbMenuItem[] }) => {\n        if (this.compareTag(data.tag)) {\n          this.items.push(...data.items);\n\n          this.menuInternalService.prepareItems(this.items);\n        }\n      });\n\n    this.menuInternalService.onNavigateHome()\n      .pipe(\n        takeWhile(() => this.alive),\n      )\n      .subscribe((data: { tag: string }) => {\n        if (this.compareTag(data.tag)) {\n          this.navigateHome();\n        }\n      });\n\n    this.menuInternalService\n      .onGetSelectedItem()\n      .pipe(\n        takeWhile(() => this.alive),\n        filter((data: any) => !data.tag || data.tag === this.tag),\n      )\n      .subscribe((data: { tag: string; listener: BehaviorSubject<{ tag: string; item: NbMenuItem }> }) => {\n        data.listener.next({ tag: this.tag, item: this.getSelectedItem(this.items) });\n      });\n\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.menuInternalService.prepareItems(this.items);\n      }\n    });\n    this.items.push(...this.menuInternalService.getItems());\n\n    this.menuInternalService.prepareItems(this.items);\n  }\n\n  onHoverItem(item: NbMenuItem) {\n    this.menuInternalService.itemHover(item, this.tag);\n  }\n\n  onToggleSubMenu(item: NbMenuItem) {\n    if (this.autoCollapseValue) {\n      this.menuInternalService.collapseAll(this.items, item);\n    }\n    item.expanded = !item.expanded;\n    this.menuInternalService.submenuToggle(item, this.tag);\n  }\n\n  // TODO: is not fired on page reload\n  onSelectItem(item: NbMenuItem) {\n    this.menuInternalService.resetItems(this.items);\n    item.selected = true;\n    this.menuInternalService.itemSelect(item, this.tag);\n  }\n\n  onItemClick(item: NbMenuItem) {\n    this.menuInternalService.itemClick(item, this.tag);\n  }\n\n  ngOnDestroy() {\n    this.alive = false;\n  }\n\n  private navigateHome() {\n    const homeItem = this.getHomeItem(this.items);\n\n    if (homeItem) {\n      this.menuInternalService.resetItems(this.items);\n      homeItem.selected = true;\n\n      if (homeItem.link) {\n        this.router.navigate([homeItem.link]);\n      }\n\n      if (homeItem.url) {\n        window.location.href = homeItem.url;\n      }\n    }\n  }\n\n  private getHomeItem(items: NbMenuItem[]): NbMenuItem {\n    let home = null;\n    items.forEach((item: NbMenuItem) => {\n      if (item.home) {\n        home = item;\n      }\n      if (item.home && item.children && item.children.length > 0) {\n        home = this.getHomeItem(item.children);\n      }\n    });\n    return home;\n  }\n\n  private compareTag(tag: string) {\n    return !tag || tag === this.tag;\n  }\n\n  private getSelectedItem(items: NbMenuItem[]): NbMenuItem {\n    let selected = null;\n    items.forEach((item: NbMenuItem) => {\n      if (item.selected) {\n        selected = item;\n      }\n      if (item.selected && item.children && item.children.length > 0) {\n        selected = this.getSelectedItem(item.children);\n      }\n    });\n    return selected;\n  }\n}\n"]}